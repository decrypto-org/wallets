\section{Our Model}
A cryptocurrency wallet facilitates the transfer of funds between individuals. The wallet contains the private keys that can be used to spend the user's cryptocurrency. With those private keys, it should be able to fulfill at least the following roles.

\begin{enumerate}
    \item Present the user with their balance.
    \item Allow the user create new valid transactions, given a description.
    \item (Optionally) Present the user with their transaction history.
\end{enumerate}

The lifecycle of the wallet is as follows. First the user generates a new seed or recovers from an existing seed, which is their secret. The wallet then performs an initial synchronisation by using the network, in order to obtain everything necessary for it to be able to perform the aforementioned functions. We denote this synchronisation step as $\text{state} \gets \text{Sync}_{\Gen, \mathcal{S}}(pk)$, where $\Gen$ is the genesis block of the blockchain and $\mathcal{S}$ a set of servers the wallet is allowed to interact with. After this initial synchronisation is complete, the wallet keeps using the network to stay up to date with relevant relevant events such as the user receiving a new transaction. The user may shut down the wallet and start it at some other point in time, when the wallet will attempt to catch-up to the network in order to be able to provide once again the aforementioned functionality.

The user may wish to create a new transaction. They specify a \emph{transaction description} to the wallet which includes the recipients and the amounts of cryptocurrency the users wishes to send to each one. To obtain the final valid transaction invokes a function $tx \gets \text{Fund}(sk, \text{state}, \text{description})$ which makes use of the user's secret key $sk$, the wallet state obtained from the Sync function and the provided transaction description.

We model the transaction history as a function extracting it from the wallet state, namely $tx_1, \dots, tx_y \gets \text{History}(pk, \text{state})$.

\begin{definition}[Wallet Protocol]
A \emph{wallet protocol} $\pi_\text{wallet}$ with respect to some server protocol $\pi_\text{wallet-server}$ that each server $s \in \mathcal{S}$ implements and a blockchain rooted in $\Gen$ is defined as a tuple of functions $\tpl{\text{Sync}_{\Gen, \mathcal{S}}, \text{Fund}, \text{History}}$.
\end{definition}
